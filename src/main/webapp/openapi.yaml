openapi: 3.0.0

info:
  version: '1.0'
  title: Hoolibo API
  description: L'interfaccia per il progetto hoolibo sviluppata dal Gruppo 3

servers:
  - url: https://api.le0nardo.dev/gruppotre/hoolibo

components:
  securitySchemes:
    SessionToken:
      type: apiKey
      in: header
      name: Authorization
  schemas:
    success-response:
      type: object
      properties:
        esito:
          type: string
          example: successo
        codice:
          type: integer
          example: 0
        risultato:
          type: object
    failure-response:
      type: object
      properties:
        esito:
          type: string
          example: fallito
        codice:
          type: integer
        motivazione:
          type: string

paths:
  /account/register:
    post:
      summary: Registra un account utente nel sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - nome
                - cognome
                - data_nascita
                - cod_fis
                - cod_scuola
              properties:
                email:
                  type: string
                  example: test@example.com
                password:
                  type: string
                  example: Ciao1234!
                nome:
                  type: string
                  example: Mario
                cognome:
                  type: string
                  example: Rossi
                data_nascita:
                  type: string
                  example: 2001-9-11
                cod_fis:
                  type: string
                  example: SPANDR05L06F839I
                cod_scuola:
                  type: string
                  example: BOIS01900X
      responses:
        '200':
          description: Successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success-response'
        '500':
          description: Fallimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/failure-response'
  /account/login:
    post:
      summary: Ottieni il token di sessione entrando con le credenziali
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  example: test@example.com
                password:
                  type: string
                  example: Ciao1234!
                session:
                  type: string
                  example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success-response'
        '500':
          description: Fallimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/failure-response'
  /account/session/deactivate:
    post:
      summary: Disattiva un token di sessione
      security:
        - SessionToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - deactivated-session
              properties:
                deactivated-session:
                  type: string
                  example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success-response'
        '500':
          description: Fallimento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/failure-response'